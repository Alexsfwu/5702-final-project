---
title: "EDAV Fall 2019 PSet 5, part A"
author: "null"
output:
  html_document:
    df_print: paged
---
```{r, include=FALSE}
knitr::opts_chunk$set(warning = FALSE, message = FALSE, echo = TRUE)
```

This assignment is designed to help you get started on the final project. Be sure to review the final project instructions (https://edav.info/project.html), in particular the new section on reproducible workflow (https://edav.info/project.html#reproducible-workflow), which summarizes principles that we've discussed in class.
    
### 1. The Team

[2 points]

a) Who's on the team? (Include names and UNIs)

    Shaofeng Wu, sw3428
    
    Chengyou Ju, cj2624
    
    Mingrui Liu, ml4404
    
    Yujing Song, ys3251

b) How do you plan to divide up the work? (Grading is on a group basis. The point of asking is to encourage you to think about this.)


### 2. The Questions

[6 points]

List three questions that you hope you will be able to answer from your research.

Main topic: What factors maybe influence salary?

a) The relationship between salary vs. regions.

b) The relationship between salary vs. job category.

c) The relationship between salary vs. agency.

### 3. Which output format do you plan to use to submit the project? 

[2 points]

(You don't have to use the same format for this assignment -- PSet 5, part A -- and the final project itself.)

Choices are:

pdf_document  

html_document  

bookdown book: https://bookdown.org/yihui/bookdown/

shiny app: https://shiny.rstudio.com/  


(Remember that it's ok to have pieces of the project that don't fit into the chosen output format; in those cases you can provide links to the relevant material.)

We decide to use the html_document as our output format.

### 4. The Data

What is your data source?  What is your method for importing data? Please be specific. Provide relevant information such as any obstacles you're encountering and what you plan to do to overcome them.



[5 points]

### 5. Provide a short summary, including 2-3 graphs, of your initial investigations. 

[10 points]

```{r}
library(dplyr)
library(corpus)
library(ggplot2)
library(magrittr)
job<- read.csv("NYC_jobs.csv")
job[job==''] <- NA



```


```{r}
category <- job$Job.Category%>%
  as.character(.)%>%
  unlist()%>%
  #na.omit()%>%
  gsub(",|&","",.)%>%
  text_sub(.,1,3,)%>%
  trimws(.,"both")

categoryList = c()
for (i in 1:length(category)){
  categoryList[i] <- as.character(category[[i]])
}

categoryList<-categoryList%>%
  data.frame(Category=.,Count =1,Job.ID = job$Job.ID)%>%
  group_by(Category)%>%
  mutate(Count = n())

ggplot(categoryList,aes(x = Category))+
  geom_bar()+
  labs(title = "postings by category")+
  coord_flip()
  
  
```
```{r}
job<- job%>%
  mutate(salary = Salary.Range.From+(Salary.Range.To-Salary.Range.From)/2)%>%
  merge(.,categoryList,by = "Job.ID")

Annual = job[job$Salary.Frequency=="Annual",]
ggplot()+
  geom_histogram(data = Annual,aes(Annual$salary))
```

```{r}
Daily = job[job$Salary.Frequency=="Daily",]
ggplot()+
  geom_histogram(data = Daily,aes(Daily$salary))
```

```{r}
ggplot(job, aes(x = Category, y = salary)) +
  geom_boxplot() +
  labs(title = "Jobs salary") +
  coord_flip()
```

From above plots, we identified the job category which post most jobs. We also see the distribution of daily salry and annual salary.
The boxplot shows the salary range for different category.
From here, we will continually explore the relationship bwtween the job category and salary.
